version: '3.4'

services:
  web:
    container_name: web
    hostname: web
    image: juliocesarmidia/micro-portainer:latest
    build:
      context: ./web
    restart: on-failure
    networks:
      - subnet_0
    ports:
      - 8080:8080
    environment:
      NODE_ENV: production
    volumes:
      - ./web:/app:rw
      - web-node-modules:/app/node_modules:rw
      - /var/run/docker.sock:/var/run/docker.sock

networks:
  subnet_0:
    driver: bridge

volumes:
  web-node-modules: {}

secrets: {}
